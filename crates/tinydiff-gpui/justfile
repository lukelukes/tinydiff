set quiet
set shell := ["bash", "-euo", "pipefail", "-c"]

pkg := "tinydiff-gpui"

[group('check')]
fmt:
    cargo fmt -p {{ pkg }}

[group('check')]
fmt-check:
    cargo fmt -p {{ pkg }} -- --check

[group('check')]
clippy:
    cargo clippy -p {{ pkg }} -- -D warnings

[group('check')]
test:
    cargo test -p {{ pkg }}

[group('check')]
[parallel]
check: fmt clippy test

[group('dev')]
[no-exit-message]
dev:
    cargo run -p {{ pkg }}

[group('dev')]
build:
    cargo build -p {{ pkg }} --release
